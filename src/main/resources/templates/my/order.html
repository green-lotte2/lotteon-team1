<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{/layout/myLayout.html}">

<!--내용 시작-->
    <div id="my" layout:fragment="content">
        <script th:inline="javascript">

            //// 팝업창들 ////
            // 상품평 작성 팝업창
            function orderReviewPopup() {
                const popReview = document.getElementById('popReview');
                popReview.style.display = "block";
                alert("g2");
            }

            function pushListHide() {
                const button = event.target;

            }





        </script>
        <script th:src="@{/js/my/popup.js}"></script>
        <nav>
            <div>
                <a href="./home.html"><img th:src="@{/images/my/my_logo.jpg}" alt="나의쇼핑정보"></a>
                <ol>
                    <li><a href="#">주문·배송<span class="delivery">1</span></a></li>
                    <li><a href="#">할인쿠폰<span class="coupon">1</span></a></li>
                    <li><a href="#">포인트<span class="point">1,000</span></a></li>
                    <li><a href="#">문의내역<span class="qna">1</span></a></li>
                </ol>
            </div>
        </nav>

        <div class="ordered">
            <ul>
                <span class="menu_else"></span>
                <li><a th:href="@{/my/order(userId=${#authentication.principal.user.userId})}">전체주문내역</a></li>
                <!--<li><a href="./favorite.html">관심상품</a></li>-->
                <li><a th:href="@{/my/point(userId=${#authentication.principal.user.userId})}">포인트내역</a></li>
                <li><a th:href="@{/my/coupon(userId=${#authentication.principal.user.userId})}">쿠폰</a></li>
                <li><a th:href="@{/my/review(userId=${#authentication.principal.user.userId})}">나의리뷰</a></li>
                <li><a th:href="@{/my/qna(userId=${#authentication.principal.user.userId})}">문의하기</a></li>
                <li><a th:href="@{/my/info(userId=${#authentication.principal.user.userId})}">나의설정</a></li>
            </ul>

            <section>
                <a href="#"><img th:src="@{/images/my/my_banner1.jpg}" alt="패션, 타운 하나로 끝" class="banner"></a>
                <article class="latest">
                    <h3>전체주문내역</h3>

                    <div class="myOrderSearch">
                        <p>기간별 조회</p>
                        <a href="#">전체</a>
                        <a href="#">일주일</a>
                        <a href="#">15일</a>
                        <a href="#">1개월</a>
                        <a href="#">3개월</a>
                        <a href="#">6개월</a>
                        <a href="#">12개월</a>

                    </div>

                    <div class="myOrderList">
                        <div class="orderByCompany" th:each="linkedMap : ${MyOrderDTOList.myOrderDTOList}">
                            <div class="myOrderTitle">
                                <p>24.04.17</p>
                                <p>주문번호<span th:text="${linkedMap.key}"></span></p>
                                <p>
                                    <span onclick="orderReviewPopup()">
                                        ∇
                                    </span>
                                </p>
                            </div>
                            <div class="myOrderRow" th:each="orderList : ${linkedMap.value}">
                                <div><img th:src="@{/uploads/__${orderList.thumb190}__}"></div>
                                <div class="myOrderInfo">
                                    <p th:text="${orderList.prodCompany}"></p>
                                    <p th:text="${orderList.prodName}"></p>
                                    <p th:text="${orderList.count}"></p>
                                    <p th:text="${#numbers.formatInteger(orderList.detailPrice,3,'COMMA')}"></p>
                                </div>
                                <div>주문 상태</div>
                                <div>
                                    <span>수취확인</span>
                                    <span>상품평쓰기</span>
                                    <span>반품신청</span>
                                    <span>교환신청</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <p>[[${MyOrderDTOList.cate}]]</p>
                    <p>[[${MyOrderDTOList.type}]]</p>
                    <p>[[${MyOrderDTOList.keyword}]]</p>
                    <p>[[${MyOrderDTOList.pg}]]</p>
                    <p>[[${MyOrderDTOList.size}]]</p>
                    <p>[[${MyOrderDTOList.total}]]</p>
                    <p>[[${MyOrderDTOList.startNo}]]</p>
                    <p>[[${MyOrderDTOList.start}]]</p>
                    <p>[[${MyOrderDTOList.end}]]</p>
                    <p>[[${MyOrderDTOList.prev}]]</p>
                    <p>[[${MyOrderDTOList.next}]]</p>

                    <p class="page">
                        <a th:if="${MyOrderDTOList.prev && MyOrderDTOList.cate == null}" th:href="@{/my/order(pg=${MyOrderDTOList.start -1})}">이전</a>
                        <a th:if="${MyOrderDTOList.prev && MyOrderDTOList.cate != null}" th:href="@{/my/order(pg=${MyOrderDTOList.start -1}, type=${MyOrderDTOList.type}, keyword=${MyOrderDTOList.keyword})}">이전</a>

                        <th:block th:each="num:${#numbers.sequence(MyOrderDTOList.start, MyOrderDTOList.end)}">
                            <a class="pageNum" th:if="${MyOrderDTOList.cate == null}" th:href="@{/my/order(pg=${num})}" th:class="${num == MyOrderDTOList} ? 'on' : ''">[[${num}]]</a>
                            <a class="pageNum" th:if="${MyOrderDTOList.cate != null}" th:href="@{/my/order(pg=${num}, type=${MyOrderDTOList.type}, keyword=${MyOrderDTOList.keyword})}" th:class="${num == 1} ? 'on' : ''">[[${num}]]</a>
                        </th:block>

                        <a th:if="${MyOrderDTOList.next && MyOrderDTOList.cate == null}" th:href="@{/my/order(pg=${MyOrderDTOList.end + 1})}">다음</a>
                        <a th:if="${MyOrderDTOList.next && MyOrderDTOList.cate != null}" th:href="@{/my/order(pg=${MyOrderDTOList.end + 1}, type=${MyOrderDTOList.type}, keyword=${MyOrderDTOList.keyword})}">다음</a>
                    </p>

                </article>
            </section>
        </div>
    </div>
<!--내용 끝-->
</html>

