<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{/layout/adminLayout.html}">
<!--내용 시작-->
    <section id="admin-product-list" layout:fragment="content">

        <script>

            function deleteProduct() {
                const button = event.target;
                const eachProduct = button.parentNode.parentNode;
                const prodNo = eachProduct.querySelector('.prodNo').value;

                console.log(prodNo);

                /*
                    product와 연관된 테이블들......??
                    wish / productimg / prodqnanote / prodqna / prodoption / prodoptdetail
                    / pdreviewimg / pdreview / orders / orderdetail / cartproduct / cart
                 */

            }

        </script>
        <nav>
            <h3>상품목록</h3>
            <p>
                HOME > 상품관리 > <strong>상품목록</strong>
            </p>
        </nav>
        <!-- 상품목록 컨텐츠 시작 -->
        <section class="sectionBox">
            <div>
                <form th:action="@{/admin/product/list}">
                    <select name="type">
                        <option value="prodName">상품명</option>
                        <option value="prodNo">상품코드</option>
                        <option value="prodCompany">제조사</option>
                        <option value="sellerNo">판매자</option>
                    </select>
                    <input class="searchInput" type="text" name="keyword">
                    <input type="hidden" name="prodSeller" th:value="ADMIN" readonly>
                    <input class="searchBtn" type="submit" value="검색">
                </form>
            </div>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>이미지</th>
                    <th>상품코드</th>
                    <th>상품명</th>
                    <th>판매가격</th>
                    <th>할인율</th>
                    <th>포인트</th>
                    <th>재고</th>
                    <th>판매자</th>
                    <th>제조사</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>

                <tr id="product" th:each="product : ${pageResponseDTO.dtoList}">
                    <td style="width: 20px;"><input type="checkbox" name="상품코드"/></td>
                    <td><img th:src="@{/uploads/__${product.thumb190}__}" class="thumb" style="width: 70px; height: 70px"></td>
                    <td style="width: 30px;">[[${product.prodNo}]]</td>
                    <td style="width: 250px">[[${product.prodName}]]</td>
                    <td th:text="${#numbers.formatInteger(product.prodPrice,3,'COMMA')} + '원'" style="width: 70px"></td>
                    <td th:text="${product.prodDiscount} + '%'" style="width: 40px">[[${product.prodDiscount}]]</td>
                    <td th:if="${product.prodPoint} > 999" th:text="${#numbers.formatInteger(product.prodPoint,3,'COMMA')} + 'P'" style="width: 60px"></td>
                    <td th:if="${product.prodPoint} < 999" th:text="${product.prodPoint} + 'P'" style="width: 60px"></td>

                    <td th:if="${product.prodStock} > 999" th:text="${#numbers.formatInteger(product.prodStock,3,'COMMA')} + '개'" style="width: 50px"></td>
                    <td th:if="${product.prodStock} < 999" th:text="${product.prodStock} + '개'" style="width: 50px"></td>
                    <td style="width: 80px" th:text="${product.prodSeller}"></td>
                    <td style="width: 80px">[[${product.prodCompany}]]</td>
                    <td>[[${product.prodHit}]]</td>
                    <td>
                        <a th:href="@{/seller/product/option(prodNo=${product.prodNo})}">[수정]</a>
                    </td>
                </tr>
            </table>

            <a class="btn" style="margin-top: 10px">선택삭제</a>

            <div class="pagingBox">
                <div class="pagingList">
                    <a th:if="${pageResponseDTO.prev}" th:href="@{/admin/product/list(pg=${pageResponseDTO.start - 1})}">이전</a>

                    <th:block th:each="num:${#numbers.sequence(pageResponseDTO.start, pageResponseDTO.end)}">
                        <a class="pageNum" th:if="${num != 0}" th:href="@{/admin/product/list(pg=${num})}" th:class="${num == pageResponseDTO.pg} ? 'on' : ''">[[${num}]]</a>
                    </th:block>

                    <a th:if="${pageResponseDTO.next}" th:href="@{/admin/product/list(pg=${pageResponseDTO.end + 1})}">다음</a>
                </div>
            </div>
        </section>
        <p class="ico info">
            <strong>Tip!</strong>
            전자상거래 등에서의 상품 등의 정보제공에 관한 고시에 따라 총 35개 상품군에 대해 상품 특성 등을 양식에 따라 입력할 수 있습니다.
        </p>
        <!-- 상품목록 컨텐츠 끝 -->
    </section>
<!--내용 끝-->
</html>