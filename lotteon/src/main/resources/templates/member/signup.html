<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/memberLayout.html}">



<!--내용 시작-->
    <main id="member" layout:fragment="content">

        <script>
            window.onload = function () {
                const agree1 = document.getElementsByName('agree1')[0];
                const agree2 = document.getElementsByName('agree2')[0];
                const agree3 = document.getElementsByName('agree3')[0];
                const agree4 = document.getElementsByName('agree4')[0];
                const agree = document.getElementsByClassName('agree')[0];


                agree.onclick = () => {

                    if (agree1.checked && agree2.checked && agree3.checked) {
                        // 일반 유저 vs 판매 유저
                        const userRole = document.getElementsByName('role')[0];
                        console.log(userRole.value);
                        if (userRole.value === 'user') {
                            if (agree4.checked) {
                                let agree4value = "Y"
                                window.location.href = "/lotteon/member/register?agree4="+agree4value;
                            } else {
                                let agree4value = "N"
                                window.location.href = "/lotteon/member/register?agree4=" + agree4value;
                            }
                        } else if (userRole.value === 'seller') {
                            if (agree4.checked) {
                                let agree4value = "Y"
                                window.location.href = "/lotteon/member/registerSeller?agree4=" + agree4value;
                            } else {
                                let agree4value = "N"
                                window.location.href = "/lotteon/member/registerSeller?agree4=" + agree4value;
                            }
                        }
                    }else {
                        // 확인 대화상자 표시
                        alert("🚨체크항목 1, 2, 3번은 필수항목입니다");
                    }
                }
            }
        </script>

        <div class="signup">

            <nav>
                <h1>약관동의</h1>
                <input type="hidden" name="role" th:value="${userDTO.user_role}">
            </nav>
            <section>
                <h3><span class="essential">(필수)</span>케이마켓 이용약관</h3>
                <textarea class="terms"  readonly>[[${termsDTO.buyer}]]</textarea>
                <label><input type="checkbox" name="agree1" />동의합니다.</label>

                <h3><span class="essential">(필수)</span>전자금융거래 이용약관</h3>
                <textarea class="financial" readonly>[[${termsDTO.finance}]]</textarea>
                <label><input type="checkbox" name="agree2" />동의합니다.</label>

                <h3><span class="essential">(필수)</span>개인정보 수집동의</h3>
                <textarea class="privacy" readonly>[[${termsDTO.privacy}]]</textarea>
                <label><input type="checkbox" name="agree3" />동의합니다.</label>
            </section>

            <section>
                <h3><span class="optional">(선택)</span>위치정보 이용약관</h3>
                <textarea class="location" readonly>[[${termsDTO.location}]]</textarea>
                <label><input type="checkbox" name="agree4" value="Y"/>동의합니다.</label>
            </section>

            <div>
                <input type="button" class="agree" value="동의하기" />
            </div>
        </div>
    </main>
<!--내용 끝-->
</html>